{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "PRO0 Configuration",
  "description": "Configuration file for PRO0 agent harness",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "proPlanner": {
      "type": "object",
      "description": "Planner agent configuration",
      "properties": {
        "model": {
          "type": "string",
          "description": "Model to use for Planner agent (e.g., 'github-copilot/claude-sonnet-4-5')"
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "description": "Temperature for model sampling (0-2)"
        },
        "top_p": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Top-p (nucleus sampling) parameter"
        }
      },
      "required": ["model"]
    },
    "proPlanner": {
      "type": "object",
      "description": "Planner agent configuration",
      "properties": {
        "model": {
          "type": "string",
          "description": "Model to use for Planner agent (e.g., 'github-copilot/claude-opus-4-5')"
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "description": "Temperature for model sampling (0-2)"
        },
        "top_p": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Top-p (nucleus sampling) parameter"
        },
        "mandatory_todos": {
          "type": "boolean",
          "default": true,
          "description": "Require TodoWrite tool usage for planning tasks"
        },
        "prd_workflow": {
          "type": "object",
          "description": "PRD (Product Requirements Document) workflow configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable two-phase PRD workflow (PRD â†’ Plan)"
            },
            "require_approval": {
              "type": "boolean",
              "default": true,
              "description": "Require user approval between PRD and execution plan"
            }
          }
        }
      },
      "required": ["model"]
    },
    "proManager": {
      "type": "object",
      "description": "Manager agent configuration (pure orchestration, no coding)",
      "properties": {
        "model": {
          "type": "string",
          "description": "Model to use for Manager agent (e.g., 'github-copilot/claude-sonnet-4-5')"
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "description": "Temperature for model sampling (0-2)"
        },
        "top_p": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Top-p (nucleus sampling) parameter"
        },
        "max_retry_on_test_failure": {
          "type": "integer",
          "minimum": 1,
          "default": 3,
          "description": "Maximum number of retries when tests fail"
        },
        "coding_allowed": {
          "type": "boolean",
          "default": false,
          "description": "Whether Manager is allowed to write code (should be false for pure delegation)"
        },
        "mandatory_todos": {
          "type": "boolean",
          "default": true,
          "description": "Require TodoWrite tool usage for tracking progress"
        },
        "ralph_loop": {
          "type": "object",
          "description": "Ralph loop configuration for iterative task execution",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable Ralph loop (iterative execution with self-review)"
            },
            "max_iterations": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10,
              "default": 5,
              "description": "Maximum number of iterations before triggering self-review"
            },
            "auto_review": {
              "type": "boolean",
              "default": true,
              "description": "Automatically trigger self-review when all tasks complete"
            },
            "continuation": {
              "type": "object",
              "description": "Continuation behavior when max iterations reached",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true,
                  "description": "Ask user for continuation when max iterations reached with incomplete tasks"
                },
                "ask_user_at_max": {
                  "type": "boolean",
                  "default": true,
                  "description": "Prompt user for decision at max iterations"
                },
                "default_extension": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 10,
                  "default": 5,
                  "description": "Default number of additional iterations to offer"
                }
              }
            }
          }
        }
      },
      "required": ["model"]
    },
    "specialists": {
      "type": "object",
      "description": "Specialist subagent configurations",
      "properties": {
        "designer": {
          "type": "object",
          "description": "Designer specialist (Frontend components, CSS, styling, layouts)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            },
            "scope": {
              "type": "string",
              "enum": ["visual-only", "frontend-components"],
              "description": "Designer scope: visual-only (CSS) or frontend-components (includes structure)"
            }
          },
          "required": ["enabled", "model"]
        },
        "frontend-coder": {
          "type": "object",
          "description": "Frontend Coder specialist (React/Vue logic, state management, hooks)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "backend-coder": {
          "type": "object",
          "description": "Backend Coder specialist (Business logic, services, controllers)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "database-coder": {
          "type": "object",
          "description": "Database Coder specialist (Schema design, queries, migrations)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "api-coder": {
          "type": "object",
          "description": "API Coder specialist (REST/GraphQL endpoints, routing)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "tester": {
          "type": "object",
          "description": "Tester specialist (Unit/integration/E2E tests)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "security-auditor": {
          "type": "object",
          "description": "Security Auditor specialist (Vulnerability checks, security review)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "devops-engineer": {
          "type": "object",
          "description": "DevOps Engineer specialist (CI/CD, deployment, infrastructure)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "documentation-writer": {
          "type": "object",
          "description": "Documentation Writer specialist (Create/update docs, README, guides)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "document-viewer": {
          "type": "object",
          "description": "Document Viewer specialist (Read/analyze documentation, extract information)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "researcher": {
          "type": "object",
          "description": "Researcher specialist (External docs, OSS examples, web search)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        },
        "self-review": {
          "type": "object",
          "description": "Self-review specialist (Comprehensive review after task completion)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable this specialist"
            },
            "model": {
              "type": "string",
              "description": "Model to use for this specialist"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "required": ["enabled", "model"]
        }
      }
    },
    "skills": {
      "type": "object",
      "description": "Skills configuration",
      "properties": {
        "auto_load": {
          "type": "boolean",
          "default": true,
          "description": "Automatically scan and load skills from directories"
        },
        "disabled": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of skill names to exclude from auto-loading"
        }
      }
    },
    "verification": {
      "type": "object",
      "description": "Verification and testing configuration",
      "properties": {
        "run_tests_after_completion": {
          "type": "boolean",
          "default": true,
          "description": "Run tests after execution completes"
        },
        "test_command": {
          "type": "string",
          "default": "npm test",
          "description": "Command to run tests"
        },
        "allow_partial_success": {
          "type": "boolean",
          "default": false,
          "description": "Allow some test failures (report but don't block)"
        },
        "regression_check": {
          "type": "boolean",
          "default": true,
          "description": "Ensure unchanged functions still pass tests"
        }
      }
    },
    "background_tasks": {
      "type": "object",
      "description": "Background task execution configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable background task execution"
        },
        "auto_parallel_threshold": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "default": 2,
          "description": "Automatically run tasks in parallel when N or more independent specialists are spawned"
        },
        "max_concurrent_per_provider": {
          "type": "integer",
          "minimum": 1,
          "maximum": 20,
          "default": 5,
          "description": "Maximum concurrent background tasks per model provider"
        },
        "max_concurrent_total": {
          "type": "integer",
          "minimum": 1,
          "maximum": 50,
          "default": 10,
          "description": "Maximum total concurrent background tasks across all providers"
        },
        "cleanup_after_ms": {
          "type": "integer",
          "minimum": 60000,
          "default": 3600000,
          "description": "Auto-cleanup completed tasks older than this duration (milliseconds, minimum 1 minute)"
        }
      }
    }
  },
  "required": ["proPlanner", "proManager"]
}
